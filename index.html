<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peter Zhang - OS Portfolio</title>
    <meta name="description" content="Peter Zhang - Senior Software Engineer Portfolio">
    <link href="./styles.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; overflow: hidden; }
        
        /* Dark mode styles */
        .dark .window { background-color: #1f2937; color: #f3f4f6; }
        .dark .window-header { background-color: #374151; border-color: #4b5563; }
        .dark .window-content { background-color: #1f2937; }
        .dark #start-menu { background-color: rgba(31, 41, 55, 0.95); border-color: #374151; }
        .dark #start-menu h3 { color: #f3f4f6; }
        .dark #start-menu p { color: #9ca3af; }
        .dark #start-menu button { color: #d1d5db; }
        .dark #start-menu button:hover { background-color: #3b82f6; color: white; }
        .dark .taskbar { background-color: rgba(31, 41, 55, 0.9); border-color: #374151; }
        .dark .taskbar-text { color: #f3f4f6; }
        
        .window { 
            transition: transform 0.1s, opacity 0.2s; 
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .window.minimized {
            transform: scale(0) translate(0, 100%);
            opacity: 0;
            pointer-events: none;
        }
        .desktop-icon:hover { background-color: rgba(255, 255, 255, 0.2); }
        .desktop-icon.selected { background-color: rgba(255, 255, 255, 0.3); border: 1px solid rgba(255, 255, 255, 0.4); }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }
        
        /* Resize Handle */
        .resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 16px;
            height: 16px;
            cursor: se-resize;
            background: linear-gradient(135deg, transparent 50%, #9ca3af 50%);
            border-bottom-right-radius: 0.5rem;
            z-index: 50;
        }
        .resize-handle:hover {
            background: linear-gradient(135deg, transparent 50%, #4b5563 50%);
        }
    </style>
</head>
<body class="bg-[url('https://images.unsplash.com/photo-1762430259780-28ffac74916c?auto=format&fit=crop&w=2070&q=80')] bg-cover bg-center h-screen w-screen flex flex-col justify-between select-none">

    <!-- Desktop Icons Area -->
    <div id="desktop" class="flex-1 p-4 flex flex-wrap content-start gap-4 w-full md:flex-col md:w-24 md:gap-2 relative z-0">
        <!-- Icons injected by JS -->
    </div>

    <!-- Windows Container -->
    <div id="windows-container" class="absolute inset-0 pointer-events-none z-10">
        <!-- Windows injected by JS -->
    </div>

    <!-- Taskbar -->
    <div class="taskbar h-12 bg-white/80 dark:bg-gray-800/90 backdrop-blur-md border-t border-gray-200 dark:border-gray-700 flex items-center justify-between px-4 z-50 relative">
        <div class="flex items-center gap-4">
            <div id="start-button" class="p-1.5 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors" onclick="WindowManager.toggleStartMenu()">
                <i class="fas fa-layer-group text-white text-lg"></i>
            </div>
            <div id="taskbar-apps" class="flex gap-2">
                <!-- Taskbar items injected by JS -->
            </div>
        </div>
        
        <div class="taskbar-text flex items-center gap-4 text-sm font-medium text-gray-800 dark:text-gray-200">
            <div class="flex gap-2 text-gray-600 dark:text-gray-400">
                <i class="fas fa-wifi"></i>
                <i class="fas fa-volume-up"></i>
            </div>
            <div id="clock">12:00 PM</div>
        </div>
    </div>

    <!-- Start Menu (Hidden by default) -->
    <div id="start-menu" class="absolute bottom-14 left-4 w-64 bg-white/90 backdrop-blur-xl rounded-xl shadow-2xl border border-gray-200 p-4 hidden z-50 transform origin-bottom-left transition-all">
        <div class="flex items-center gap-3 mb-4 pb-4 border-b border-gray-200">
            <img src="assets/images/Peter_Zhang_Profile.webp" class="w-10 h-10 rounded-full object-cover" alt="Profile">
            <div>
                <h3 class="font-bold text-sm">Peter Zhang</h3>
                <p class="text-xs text-gray-500">Senior Software Engineer</p>
            </div>
        </div>
        <div class="space-y-1">
            <button onclick="WindowManager.openWindow('about')" class="w-full text-left px-2 py-1.5 rounded hover:bg-blue-500 hover:text-white text-sm flex items-center gap-2 transition-colors">
                <i class="fas fa-user-circle w-5"></i> About Me
            </button>
            <button onclick="WindowManager.openWindow('projects')" class="w-full text-left px-2 py-1.5 rounded hover:bg-blue-500 hover:text-white text-sm flex items-center gap-2 transition-colors">
                <i class="fas fa-folder w-5"></i> Projects
            </button>
            <button onclick="WindowManager.openWindow('library')" class="w-full text-left px-2 py-1.5 rounded hover:bg-blue-500 hover:text-white text-sm flex items-center gap-2 transition-colors">
                <i class="fas fa-book w-5"></i> Library
            </button>
            <button onclick="window.open('https://github.com/peterwzhang', '_blank')" class="w-full text-left px-2 py-1.5 rounded hover:bg-blue-500 hover:text-white text-sm flex items-center gap-2 transition-colors">
                <i class="fab fa-github w-5"></i> GitHub
            </button>
            <button onclick="window.open('mailto:peterwengzhang@gmail.com', '_blank')" class="w-full text-left px-2 py-1.5 rounded hover:bg-blue-500 hover:text-white text-sm flex items-center gap-2 transition-colors">
                <i class="fas fa-envelope w-5"></i> Email Me
            </button>
            <button onclick="WindowManager.openWindow('settings')" class="w-full text-left px-2 py-1.5 rounded hover:bg-blue-500 hover:text-white text-sm flex items-center gap-2 transition-colors">
                <i class="fas fa-cog w-5"></i> Settings
            </button>
        </div>
        <div class="mt-4 pt-2 border-t border-gray-200 dark:border-gray-600 flex justify-between text-xs text-gray-500 dark:text-gray-400">
            <button class="hover:text-gray-900" onclick="WindowManager.shutdown()"><i class="fas fa-power-off"></i> Shut Down</button>
            <button class="hover:text-gray-900" onclick="WindowManager.lock()"><i class="fas fa-lock"></i> Lock</button>
        </div>
    </div>

    <!-- Lock Screen -->
    <div id="lock-screen" class="absolute inset-0 bg-black/60 backdrop-blur-2xl z-[60] hidden flex flex-col items-center justify-center text-white transition-opacity duration-500">
        <div class="text-8xl font-thin mb-8 tracking-wider" id="lock-clock">12:00</div>
        <div class="flex flex-col items-center gap-4">
            <img src="assets/images/Peter_Zhang_Profile.webp" class="w-32 h-32 rounded-full border-4 border-white/20 shadow-2xl object-cover">
            <h2 class="text-2xl font-bold">Peter Zhang</h2>
            <div class="flex gap-2 mt-4">
                <input type="password" placeholder="Enter Password" class="bg-white/10 border border-white/20 rounded-full px-6 py-2 text-white placeholder-white/50 outline-none focus:bg-white/20 transition-colors text-center w-64 backdrop-blur-md" onkeydown="if(event.key === 'Enter') WindowManager.unlock()">
                <button onclick="WindowManager.unlock()" class="bg-white/10 hover:bg-white/20 rounded-full w-10 h-10 flex items-center justify-center transition-colors backdrop-blur-md"><i class="fas fa-arrow-right"></i></button>
            </div>
            <p class="text-sm text-white/40 mt-2">Hint: Password is "password" (or anything really)</p>
        </div>
    </div>

    <!-- Shutdown Screen -->
    <div id="shutdown-screen" class="absolute inset-0 bg-black z-[70] hidden flex items-center justify-center text-white">
        <div class="text-center">
            <div class="w-16 h-16 border-4 border-t-transparent border-white rounded-full animate-spin mb-4 mx-auto"></div>
            <p class="text-xl font-light tracking-widest">SHUTTING DOWN...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="projects-generator.js"></script>
    <script src="books-generator.js"></script>
    <script src="script.js"></script>
</body>
</html>